---
title: "Simple example of basic PvSTATEM package pre-release version functionalities"
author: "Tymoteusz KwieciÅ„ski"
date: "`r Sys.Date()`"
output: rmarkdown::html_document
vignette: >
  %\VignetteIndexEntry{Simple example of basic PvSTATEM package pre-release version functionalities}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
  %\VignetteDepends{ggplot2}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = FALSE,
  comment = "#>",
  warning = FALSE,
  message = FALSE
)
```

# Introduction
The basic functionality of the `PvSTATEM` package is reading raw MBA data. To present the functionalities of the package, we created a simple, artificial `csv` file, which is pre-loaded into the package.

```{r}
library(PvSTATEM)

plate_filepath <- system.file("extdata", "covid_oise/Covid_Oise_9plex_plate1_IgG_20210222_20210222_142449.csv", package = "PvSTATEM", mustWork = TRUE) # get the filepath of the csv dataset

layout_filepath <- system.file("extdata", "covid_oise/covid_oise_IgG_plate1.xlsx", package = "PvSTATEM", mustWork = TRUE) # get the filepath of the csv dataset

plate <- read_data(plate_filepath, layout_file_path = layout_filepath) # read the data
```

After the plate is successfully loaded, we can look into some basic information about the plate.

```{r}
plate$summary()

plate$get_sample(1)
plate$get_sample_by_type("STANDARD CURVE")[[1]]

plate$sample_names
plate$analyte_names
```



## Warnings
Our scripts are designed to catch potential errors in the data. If there are any warnings, they will be stored in the `warnings` field of the plate object. The warnings can be accessed by the `$warnings` field of the plate object or by the `$warnings` field of the sample object.

```{r}
## warnings ----------------------------------------------------------------

plate$warnings

plate$get_sample(1)$warnings

plate$get(analyte = "spike", sample = 1)

plate$get_sample_by_type("STANDARD CURVE")[[1]]$warnings
```



## simple standard curve plotting
```{r}
plot_standard_curve_antibody(plate, antibody_name = "spike_6P_IPP")

plate$blank_adjustment()

plot_standard_curve_antibody(plate, antibody_name = "spike_6P_IPP")

```

```{r}
model <- create_standard_curve_model_antibody(plate, antibody_name = "spike_6P_IPP")

plot_standard_curve_antibody_with_model(plate, antibody_name = "spike_6P_IPP", model)
```

```{r}


```



